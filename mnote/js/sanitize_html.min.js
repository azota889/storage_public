/**
 * Minified by jsDelivr using Terser v5.14.1.
 * Original file: /npm/sanitize-html@2.7.2/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const htmlparser=require("htmlparser2"),escapeStringRegexp=require("escape-string-regexp"),{isPlainObject:isPlainObject}=require("is-plain-object"),deepmerge=require("deepmerge"),parseSrcset=require("parse-srcset"),{parse:postcssParse}=require("postcss"),mediaTags=["img","audio","video","picture","svg","object","map","iframe","embed"],vulnerableTags=["script","style"];function each(e,t){e&&Object.keys(e).forEach((function(n){t(e[n],n)}))}function has(e,t){return{}.hasOwnProperty.call(e,t)}function filter(e,t){const n=[];return each(e,(function(e){t(e)&&n.push(e)})),n}function isEmptyObject(e){for(const t in e)if(has(e,t))return!1;return!0}function stringifySrcset(e){return e.map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", ")}module.exports=sanitizeHtml;const VALID_HTML_ATTRIBUTE_NAME=/^[^\0\t\n\f\r /<=>]+$/;function sanitizeHtml(e,t,n){if(null==e)return"";let r="",i="";function s(e,t){const n=this;this.tag=e,this.attribs=t||{},this.tagPosition=r.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(g.length){g[g.length-1].text+=n.text}},this.updateParentNodeMediaChildren=function(){if(g.length&&mediaTags.includes(this.tag)){g[g.length-1].mediaChildren.push(this.tag)}}}(t=Object.assign({},sanitizeHtml.defaults,t)).parser=Object.assign({},htmlParserDefaults,t.parser),vulnerableTags.forEach((function(e){t.allowedTags&&t.allowedTags.indexOf(e)>-1&&!t.allowVulnerableTags&&console.warn(`\n\n⚠️ Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const a=t.nonTextTags||["script","style","textarea","option"];let o,l;t.allowedAttributes&&(o={},l={},each(t.allowedAttributes,(function(e,t){o[t]=[];const n=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(escapeStringRegexp(e).replace(/\\\*/g,".*")):o[t].push(e)})),n.length&&(l[t]=new RegExp("^("+n.join("|")+")$"))})));const c={},d={},u={};each(t.allowedClasses,(function(e,t){o&&(has(o,t)||(o[t]=[]),o[t].push("class")),c[t]=[],u[t]=[];const n=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?n.push(escapeStringRegexp(e).replace(/\\\*/g,".*")):e instanceof RegExp?u[t].push(e):c[t].push(e)})),n.length&&(d[t]=new RegExp("^("+n.join("|")+")$"))}));const f={};let p,h,g,m,w,b,x;each(t.transformTags,(function(e,t){let n;"function"==typeof e?n=e:"string"==typeof e&&(n=sanitizeHtml.simpleTransform(e)),"*"===t?p=n:f[t]=n}));let v=!1;y();const T=new htmlparser.Parser({onopentag:function(e,n){if(t.enforceHtmlBoundary&&"html"===e&&y(),b)return void x++;const T=new s(e,n);g.push(T);let H=!1;const A=!!T.text;let R;if(has(f,e)&&(R=f[e](e,n),T.attribs=n=R.attribs,void 0!==R.text&&(T.innerText=R.text),e!==R.tagName&&(T.name=e=R.tagName,w[h]=R.tagName)),p&&(R=p(e,n),T.attribs=n=R.attribs,e!==R.tagName&&(T.name=e=R.tagName,w[h]=R.tagName)),(t.allowedTags&&-1===t.allowedTags.indexOf(e)||"recursiveEscape"===t.disallowedTagsMode&&!isEmptyObject(m)||null!=t.nestingLimit&&h>=t.nestingLimit)&&(H=!0,m[h]=!0,"discard"===t.disallowedTagsMode&&-1!==a.indexOf(e)&&(b=!0,x=1),m[h]=!0),h++,H){if("discard"===t.disallowedTagsMode)return;i=r,r=""}r+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(T.innerText=""),(!o||has(o,e)||o["*"])&&each(n,(function(n,i){if(!VALID_HTML_ATTRIBUTE_NAME.test(i))return void delete T.attribs[i];let s=!1;if(!o||has(o,e)&&-1!==o[e].indexOf(i)||o["*"]&&-1!==o["*"].indexOf(i)||has(l,e)&&l[e].test(i)||l["*"]&&l["*"].test(i))s=!0;else if(o&&o[e])for(const t of o[e])if(isPlainObject(t)&&t.name&&t.name===i){s=!0;let e="";if(!0===t.multiple){const r=n.split(" ");for(const n of r)-1!==t.values.indexOf(n)&&(""===e?e=n:e+=" "+n)}else t.values.indexOf(n)>=0&&(e=n);n=e}if(s){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(i)&&S(e,n))return void delete T.attribs[i];if("script"===e&&"src"===i){let e=!0;try{const r=E(n);if(t.allowedScriptHostnames||t.allowedScriptDomains){const n=(t.allowedScriptHostnames||[]).find((function(e){return e===r.url.hostname})),i=(t.allowedScriptDomains||[]).find((function(e){return r.url.hostname===e||r.url.hostname.endsWith(`.${e}`)}));e=n||i}}catch(t){e=!1}if(!e)return void delete T.attribs[i]}if("iframe"===e&&"src"===i){let e=!0;try{const r=E(n);if(r.isRelativeUrl)e=has(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const n=(t.allowedIframeHostnames||[]).find((function(e){return e===r.url.hostname})),i=(t.allowedIframeDomains||[]).find((function(e){return r.url.hostname===e||r.url.hostname.endsWith(`.${e}`)}));e=n||i}}catch(t){e=!1}if(!e)return void delete T.attribs[i]}if("srcset"===i)try{let e=parseSrcset(n);if(e.forEach((function(e){S("srcset",e.url)&&(e.evil=!0)})),e=filter(e,(function(e){return!e.evil})),!e.length)return void delete T.attribs[i];n=stringifySrcset(filter(e,(function(e){return!e.evil}))),T.attribs[i]=n}catch(e){return void delete T.attribs[i]}if("class"===i){const t=c[e],r=c["*"],s=d[e],a=u[e],o=[s,d["*"]].concat(a).filter((function(e){return e}));if(!(n=P(n,t&&r?deepmerge(t,r):t||r,o)).length)return void delete T.attribs[i]}if("style"===i)try{const r=function(e,t){if(!t)return e;const n=e.nodes[0];let r;r=t[n.selector]&&t["*"]?deepmerge(t[n.selector],t["*"]):t[n.selector]||t["*"];r&&(e.nodes[0].nodes=n.nodes.reduce(function(e){return function(t,n){if(has(e,n.prop)){e[n.prop].some((function(e){return e.test(n.value)}))&&t.push(n)}return t}}(r),[]));return e}(postcssParse(e+" {"+n+"}"),t.allowedStyles);if(0===(n=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e}),[]).join(";")}(r)).length)return void delete T.attribs[i]}catch(e){return void delete T.attribs[i]}r+=" "+i,n&&n.length&&(r+='="'+O(n,!0)+'"')}else delete T.attribs[i]})),-1!==t.selfClosing.indexOf(e)?r+=" />":(r+=">",!T.innerText||A||t.textFilter||(r+=O(T.innerText),v=!0)),H&&(r=i+O(r),i="")},ontext:function(e){if(b)return;const n=g[g.length-1];let i;if(n&&(i=n.tag,e=void 0!==n.innerText?n.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==i&&"style"!==i){const n=O(e,!1);t.textFilter&&!v?r+=t.textFilter(n,i):v||(r+=n)}else r+=e;if(g.length){g[g.length-1].text+=e}},onclosetag:function(e){if(b){if(x--,x)return;b=!1}const n=g.pop();if(!n)return;if(n.tag!==e)return void g.push(n);b=!!t.enforceHtmlBoundary&&"html"===e,h--;const s=m[h];if(s){if(delete m[h],"discard"===t.disallowedTagsMode)return void n.updateParentNodeText();i=r,r=""}w[h]&&(e=w[h],delete w[h]),t.exclusiveFilter&&t.exclusiveFilter(n)?r=r.substr(0,n.tagPosition):(n.updateParentNodeMediaChildren(),n.updateParentNodeText(),-1===t.selfClosing.indexOf(e)?(r+="</"+e+">",s&&(r=i+O(r),i=""),v=!1):s&&(r=i,i=""))}},t.parser);return T.write(e),T.end(),r;function y(){r="",h=0,g=[],m={},w={},b=!1,x=0}function O(e,n){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n&&(e=e.replace(/"/g,"&quot;")),e}function S(e,n){for(n=n.replace(/[\x00-\x20]+/g,"");;){const e=n.indexOf("\x3c!--");if(-1===e)break;const t=n.indexOf("--\x3e",e+4);if(-1===t)break;n=n.substring(0,e)+n.substring(t+3)}const r=n.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!r)return!!n.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const i=r[1].toLowerCase();return has(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(i):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(i)}function E(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let t="relative://relative-site";for(let e=0;e<100;e++)t+=`/${e}`;const n=new URL(e,t);return{isRelativeUrl:n&&"relative-site"===n.hostname&&"relative:"===n.protocol,url:n}}function P(e,t,n){return t?(e=e.split(/\s+/)).filter((function(e){return-1!==t.indexOf(e)||n.some((function(t){return t.test(e)}))})).join(" "):e}}const htmlParserDefaults={decodeEntities:!0};sanitizeHtml.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1},sanitizeHtml.simpleTransform=function(e,t,n){return n=void 0===n||n,t=t||{},function(r,i){let s;if(n)for(s in t)i[s]=t[s];else i=t;return{tagName:e,attribs:i}}};
//# sourceMappingURL=/sm/ec91d36e3719d9c1c2a78ddf040aad10ec50b3cfe4f310d38b7835f42d7da772.map